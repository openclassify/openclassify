{% set defaultAdLimit = setting_value('visiosoft.module.packages::default_adv_limit') %}
{% set remainingFreeAd = defaultAdLimit ? defaultAdLimit - count(getUserAds()) : 0 %}
{% set freeCount = remainingFreeAd < 0 ? 0 : remainingFreeAd %}
{% set totalCount = freeCount %}
{% set myPackages = myPackages() %}

{% for package in myPackages %}
    {% set totalCount = totalCount + (package.ad_limit - (package.ad_limit - package.remaining_ad_limit)) %}
{% endfor %}

<div class="mt-3 fs-14 color_9">
    {{ trans('visiosoft.theme.restate::field.package_info', {count: totalCount}) }}
</div>

<div class="d-flex align-items-center mt-3 flex-md-row flex-column">
    {% if defaultAdLimit %}
        <div class="p-3 mx-1 rounded shadow-sm border bg-white d-flex flex-column flex-grow-1 position-relative justify-content-between maxWidth_Advs_2">
            <div class="d-flex justify-content-between">
                <span class="color_8 font-weight-bold">
                    {{ trans('visiosoft.module.packages::field.remaining_free_ads') }}
                </span>
                <span class="text-danger border rounded-circle wSpecial d-flex align-items-center justify-content-center font-weight-bold bg-white">
                    {{ freeCount }}
                </span>
            </div>
            <span class="color_9 fs-14">
                {{ trans('visiosoft.theme.restate::field.ads_rights', {count: freeCount})|raw }}
            </span>
        </div>
    {% endif %}
    {% for package in myPackages %}
        <div class="p-3 mx-1 rounded shadow-sm border bg-white d-flex flex-column flex-grow-1 position-relative justify-content-between maxWidth_Advs_2">
            <div class="d-flex justify-content-between">
                <span class="color_8 font-weight-bold">
                    {{ package.package.first().name }}
                </span>
                <span class="text-danger border rounded-circle wSpecial d-flex align-items-center justify-content-center font-weight-bold bg-white">
                    {{ package.ad_limit - (package.ad_limit - package.remaining_ad_limit) }}
                </span>
            </div>
            <span class="color_9 fs-14">
                {{ trans('visiosoft.theme.restate::field.ads_rights', {count: package.ad_limit - (package.ad_limit - package.remaining_ad_limit)})|raw }}
            </span>
        </div>
    {% endfor %}
</div>
