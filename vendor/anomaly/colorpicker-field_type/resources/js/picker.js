!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Default=e():(t.ColorPicker=t.ColorPicker||{},t.ColorPicker.Default=e())}(window,function(){return function(t){var e={};function r(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,r){if(this.nodes=[],this.pseudoSelector="",this.callbacks={},r||(r=document),"string"==typeof e)if("<"===e[0]&&">"===e[e.length-1])this.nodes=[t.createNode(e)];else{if(-1!==e.search(/(:before|:after)$/gi)){var o=e.match(/(:before|:after)$/gi);e=e.split(o[0])[0],this.pseudoSelector=o[0]}this.nodes=[].slice.call(r.querySelectorAll(e))}else e instanceof NodeList?this.nodes=e.length>1?[].slice.call(e):[e]:(e instanceof HTMLDocument||e instanceof Window||e instanceof HTMLElement)&&(this.nodes=[e])}return t.select=function(e,r){return new t(e,r)},t.create=function(e){return new t(t.createNode(e))},t.prototype.attr=function(t,e){return void 0!=e?(this.each(this.nodes,function(r){r.setAttribute(t,e)}),this):this.getLastNode().getAttribute(t)},t.prototype.append=function(e){var r;return r=e instanceof t?e.get():e,this.each(this.nodes,function(t){t.appendChild(r)}),this},t.prototype.parent=function(){return new t(this.getLastNode().parentNode)},t.prototype.each=function(t,e){t instanceof Function&&(e=t,t=this.nodes);for(var r=0;r<t.length;r++)e.call(this.nodes[r],this.nodes[r],r);return this},t.prototype.hasClass=function(t){return this.getLastNode().classList.contains(t)},t.prototype.addClass=function(t){if(t){var e=t.split(" ");this.each(this.nodes,function(t){for(var r in e)t.classList.add(e[r])})}return this},t.prototype.removeClass=function(t){var e=t.split(" ");return this.each(this.nodes,function(t){for(var r in e)t.classList.remove(e[r])}),this},t.prototype.html=function(t){this.each(this.nodes,function(e){e.innerHTML=t})},t.prototype.find=function(e){return new t(e,this.getLastNode())},t.prototype.trigger=function(t,e){var r=new CustomEvent(t,{detail:e});return this.each(this.nodes,function(t){t.dispatchEvent(r)}),this},t.prototype.text=function(t){return this.each(this.nodes,function(e){e.innerText=t}),this},t.prototype.css=function(e,r){if(void 0===r){var o=this.getLastNode(),i=null;if(e=t.convertToJsProperty(e),"function"!=typeof o.getBoundingClientRect||this.pseudoSelector||(i=o.getBoundingClientRect()[e]),!i){var s=getComputedStyle(o,this.pseudoSelector)[e];s.search("px")&&(i=parseInt(s,10))}if(isNaN(i))throw"Undefined css property: "+e;return i}return this.nodes.length>1?this.each(this.nodes,function(t){t.style[e]=r}):this.nodes[0].style[e]=r,this},t.prototype.on=function(t,e){var r=this;return this.each(this.nodes,function(o){var i=function(t){e.call(o,t)};r.callbacks[t]=i,o.addEventListener(t,i)}),this},t.prototype.off=function(t){var e=this.callbacks[t];return this.each(this.nodes,function(r){r.removeEventListener(t,e,!1)}),this},t.prototype.val=function(t){return void 0===t?this.getLastNode().value:(this.each(this.nodes,function(e){e.value=t}),this)},t.prototype.is=function(t){return this.getLastNode().tagName.toLowerCase()===t},t.prototype.get=function(t){return void 0===t&&(t=0),this.nodes[t]},t.prototype.length=function(){return this.nodes.length},t.prototype.hide=function(){return this.each(this.nodes,function(e){t.select(e).css("display","none")}),this},t.prototype.show=function(){return this.each(this.nodes,function(e){t.select(e).css("display","")}),this},t.prototype.empty=function(){return this.each(this.nodes,function(e){t.select(e).get().innerHTML=""}),this},t.prototype.remove=function(){this.each(this.nodes,function(t){t.remove()})},t.prototype.insertBefore=function(t){var e=this.resolveElement(t);return this.each(this.nodes,function(t){t.parentNode.insertBefore(e,e.previousSibling)}),this},t.prototype.insertAfter=function(t){var e=this.resolveElement(t);return this.each(this.nodes,function(t){t.parentNode.insertBefore(e,t.nextSibling)}),this},t.prototype.resolveElement=function(e){var r;return t.isHtml(e)?r=t.createNode(e):e instanceof HTMLElement?r=e:e instanceof t&&(r=e.get()),r},t.prototype.closest=function(e){return t.select(this.getLastNode().closest(e))},t.prototype.data=function(t){return this.attr("data-"+t)},t.prototype.width=function(t){if(void 0!==t)return this.css("width",t),this;if(this.getLastNode()===window)return parseInt(this.getLastNode().innerWidth,10);var e=this.css("width").toString();return e.search("px")?parseInt(this.css("width"),10):e},t.prototype.height=function(t){return void 0!==t?(this.css("height",t),this):this.getLastNode()===window?parseInt(this.getLastNode().innerHeight,10):parseInt(this.css("height"),10)},t.prototype.position=function(){return{top:Number(this.getLastNode().getBoundingClientRect().top),bottom:Number(this.getLastNode().getBoundingClientRect().bottom),left:Number(this.getLastNode().getBoundingClientRect().left),right:Number(this.getLastNode().getBoundingClientRect().right)}},t.prototype.offset=function(){return{top:Number(this.getLastNode().offsetTop),left:Number(this.getLastNode().offsetLeft)}},t.createNode=function(t){if("<"===t[0]&&">"===t[t.length-1]){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}return document.createElement(t)},t.isHtml=function(t){return"<"===t[0]&&">"===t[t.length-1]},t.convertToJsProperty=function(t){return(t=(t=(t=t.toLowerCase().replace("-"," ")).replace(/(^| )(\w)/g,function(t){return t.toUpperCase()})).charAt(0).toLowerCase()+t.slice(1)).replace(" ","")},t.prototype.getLastNode=function(){return this.nodes[this.nodes.length-1]},t}();e.TsDom=o},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){!function(e){function r(t,e){if(!(t=i(t)))return null;var o,s,n,a=1/0;e||(e=r.DEFAULT_COLORS);for(var c=0;c<e.length;++c)s=e[c].rgb,(o=Math.pow(t.r-s.r,2)+Math.pow(t.g-s.g,2)+Math.pow(t.b-s.b,2))<a&&(a=o,n=e[c]);return n.name?{name:n.name,value:n.source,rgb:n.rgb,distance:Math.sqrt(a)}:n.source}function o(t){return t instanceof Array?t.map(function(t){return s(t)}):Object.keys(t).map(function(e){return s(t[e],e)})}function i(t){if("object"==typeof t)return t;if(t in r.STANDARD_COLORS)return i(r.STANDARD_COLORS[t]);var e=t.match(/^#?((?:[0-9a-f]{3}){1,2})$/i);if(e)return e=3===(e=e[1]).length?[e.charAt(0)+e.charAt(0),e.charAt(1)+e.charAt(1),e.charAt(2)+e.charAt(2)]:[e.substring(0,2),e.substring(2,4),e.substring(4,6)],{r:parseInt(e[0],16),g:parseInt(e[1],16),b:parseInt(e[2],16)};var o=t.match(/^rgb\(\s*(\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)\s*\)$/i);if(o)return{r:n(o[1]),g:n(o[2]),b:n(o[3])};throw Error('"'+t+'" is not a valid color')}function s(t,e){var r={};if(e&&(r.name=e),"string"==typeof t)r.source=t,r.rgb=i(t);else if("object"==typeof t){if(t.source)return s(t.source,t.name);r.rgb=t,r.source=function(t){return"#"+a(t.r.toString(16))+a(t.g.toString(16))+a(t.b.toString(16))}(t)}return r}function n(t){return"%"===t.charAt(t.length-1)?Math.round(255*parseInt(t,10)/100):Number(t)}function a(t){return 1===t.length&&(t="0"+t),t}r.from=function t(e){var i=o(e),s=r,n=function(t){return s(t,i)};return n.from=t,n.or=function(t){var e=i.concat(o(t));return r.from(e)},n},r.STANDARD_COLORS={aqua:"#0ff",black:"#000",blue:"#00f",fuchsia:"#f0f",gray:"#808080",green:"#008000",lime:"#0f0",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",purple:"#800080",red:"#f00",silver:"#c0c0c0",teal:"#008080",white:"#fff",yellow:"#ff0"},r.DEFAULT_COLORS=o(["#f00","#f80","#ff0","#0f0","#00f","#008","#808"]),r.VERSION="0.4.4","object"==typeof t&&t&&t.exports?t.exports=r:e.nearestColor=r}(this)}).call(this,r(1)(t))},function(t,e,r){var o;!function(i){var s=/^\s+/,n=/\s+$/,a=0,c=i.round,h=i.min,l=i.max,u=i.random;function p(t,e){if(t=t||"",e=e||{},t instanceof p)return t;if(!(this instanceof p))return new p(t,e);var r=function(t){var e={r:0,g:0,b:0},r=1,o=null,a=null,c=null,u=!1,p=!1;"string"==typeof t&&(t=function(t){t=t.replace(s,"").replace(n,"").toLowerCase();var e,r=!1;if(T[t])t=T[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=X.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=X.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=X.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=X.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=X.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=X.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=X.hex8.exec(t))return{r:H(e[1]),g:H(e[2]),b:H(e[3]),a:F(e[4]),format:r?"name":"hex8"};if(e=X.hex6.exec(t))return{r:H(e[1]),g:H(e[2]),b:H(e[3]),format:r?"name":"hex"};if(e=X.hex4.exec(t))return{r:H(e[1]+""+e[1]),g:H(e[2]+""+e[2]),b:H(e[3]+""+e[3]),a:F(e[4]+""+e[4]),format:r?"name":"hex8"};if(e=X.hex3.exec(t))return{r:H(e[1]+""+e[1]),g:H(e[2]+""+e[2]),b:H(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==typeof t&&(Y(t.r)&&Y(t.g)&&Y(t.b)?(e=function(t,e,r){return{r:255*M(t,255),g:255*M(e,255),b:255*M(r,255)}}(t.r,t.g,t.b),u=!0,p="%"===String(t.r).substr(-1)?"prgb":"rgb"):Y(t.h)&&Y(t.s)&&Y(t.v)?(o=R(t.s),a=R(t.v),e=function(t,e,r){t=6*M(t,360),e=M(e,100),r=M(r,100);var o=i.floor(t),s=t-o,n=r*(1-e),a=r*(1-s*e),c=r*(1-(1-s)*e),h=o%6;return{r:255*[r,a,n,n,c,r][h],g:255*[c,r,r,a,n,n][h],b:255*[n,n,c,r,r,a][h]}}(t.h,o,a),u=!0,p="hsv"):Y(t.h)&&Y(t.s)&&Y(t.l)&&(o=R(t.s),c=R(t.l),e=function(t,e,r){var o,i,s;function n(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=M(t,360),e=M(e,100),r=M(r,100),0===e)o=i=s=r;else{var a=r<.5?r*(1+e):r+e-r*e,c=2*r-a;o=n(c,a,t+1/3),i=n(c,a,t),s=n(c,a,t-1/3)}return{r:255*o,g:255*i,b:255*s}}(t.h,o,c),u=!0,p="hsl"),t.hasOwnProperty("a")&&(r=t.a));return r=D(r),{ok:u,format:t.format||p,r:h(255,l(e.r,0)),g:h(255,l(e.g,0)),b:h(255,l(e.b,0)),a:r}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=c(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=r.ok,this._tc_id=a++}function f(t,e,r){t=M(t,255),e=M(e,255),r=M(r,255);var o,i,s=l(t,e,r),n=h(t,e,r),a=(s+n)/2;if(s==n)o=i=0;else{var c=s-n;switch(i=a>.5?c/(2-s-n):c/(s+n),s){case t:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-t)/c+2;break;case r:o=(t-e)/c+4}o/=6}return{h:o,s:i,l:a}}function d(t,e,r){t=M(t,255),e=M(e,255),r=M(r,255);var o,i,s=l(t,e,r),n=h(t,e,r),a=s,c=s-n;if(i=0===s?0:c/s,s==n)o=0;else{switch(s){case t:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-t)/c+2;break;case r:o=(t-e)/c+4}o/=6}return{h:o,s:i,v:a}}function g(t,e,r,o){var i=[N(c(t).toString(16)),N(c(e).toString(16)),N(c(r).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function C(t,e,r,o){return[N(E(o)),N(c(t).toString(16)),N(c(e).toString(16)),N(c(r).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var r=p(t).toHsl();return r.s-=e/100,r.s=L(r.s),p(r)}function m(t,e){e=0===e?0:e||10;var r=p(t).toHsl();return r.s+=e/100,r.s=L(r.s),p(r)}function b(t){return p(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var r=p(t).toHsl();return r.l+=e/100,r.l=L(r.l),p(r)}function _(t,e){e=0===e?0:e||10;var r=p(t).toRgb();return r.r=l(0,h(255,r.r-c(-e/100*255))),r.g=l(0,h(255,r.g-c(-e/100*255))),r.b=l(0,h(255,r.b-c(-e/100*255))),p(r)}function k(t,e){e=0===e?0:e||10;var r=p(t).toHsl();return r.l-=e/100,r.l=L(r.l),p(r)}function w(t,e){var r=p(t).toHsl(),o=(r.h+e)%360;return r.h=o<0?360+o:o,p(r)}function x(t){var e=p(t).toHsl();return e.h=(e.h+180)%360,p(e)}function A(t){var e=p(t).toHsl(),r=e.h;return[p(t),p({h:(r+120)%360,s:e.s,l:e.l}),p({h:(r+240)%360,s:e.s,l:e.l})]}function S(t){var e=p(t).toHsl(),r=e.h;return[p(t),p({h:(r+90)%360,s:e.s,l:e.l}),p({h:(r+180)%360,s:e.s,l:e.l}),p({h:(r+270)%360,s:e.s,l:e.l})]}function O(t){var e=p(t).toHsl(),r=e.h;return[p(t),p({h:(r+72)%360,s:e.s,l:e.l}),p({h:(r+216)%360,s:e.s,l:e.l})]}function P(t,e,r){e=e||6,r=r||30;var o=p(t).toHsl(),i=360/r,s=[p(t)];for(o.h=(o.h-(i*e>>1)+720)%360;--e;)o.h=(o.h+i)%360,s.push(p(o));return s}function I(t,e){e=e||6;for(var r=p(t).toHsv(),o=r.h,i=r.s,s=r.v,n=[],a=1/e;e--;)n.push(p({h:o,s:i,v:s})),s=(s+a)%1;return n}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,o=this.toRgb();return t=o.r/255,e=o.g/255,r=o.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=D(t),this._roundA=c(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=c(360*t.h),r=c(100*t.s),o=c(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+o+"%)":"hsva("+e+", "+r+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=c(360*t.h),r=c(100*t.s),o=c(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+o+"%)":"hsla("+e+", "+r+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,o,i){var s=[N(c(t).toString(16)),N(c(e).toString(16)),N(c(r).toString(16)),N(E(o))];if(i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1))return s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0);return s.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*M(this._r,255))+"%",g:c(100*M(this._g,255))+"%",b:c(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*M(this._r,255))+"%, "+c(100*M(this._g,255))+"%, "+c(100*M(this._b,255))+"%)":"rgba("+c(100*M(this._r,255))+"%, "+c(100*M(this._g,255))+"%, "+c(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(j[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+C(this._r,this._g,this._b,this._a),r=e,o=this._gradientType?"GradientType = 1, ":"";if(t){var i=p(t);r="#"+C(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,o=this._a<1&&this._a>=0;return e||!o||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},p.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var o in t)t.hasOwnProperty(o)&&(r[o]="a"===o?t[o]:R(t[o]));t=r}return p(t,e)},p.equals=function(t,e){return!(!t||!e)&&p(t).toRgbString()==p(e).toRgbString()},p.random=function(){return p.fromRatio({r:u(),g:u(),b:u()})},p.mix=function(t,e,r){r=0===r?0:r||50;var o=p(t).toRgb(),i=p(e).toRgb(),s=r/100;return p({r:(i.r-o.r)*s+o.r,g:(i.g-o.g)*s+o.g,b:(i.b-o.b)*s+o.b,a:(i.a-o.a)*s+o.a})},p.readability=function(t,e){var r=p(t),o=p(e);return(i.max(r.getLuminance(),o.getLuminance())+.05)/(i.min(r.getLuminance(),o.getLuminance())+.05)},p.isReadable=function(t,e,r){var o,i,s=p.readability(t,e);switch(i=!1,(o=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+o.size){case"AAsmall":case"AAAlarge":i=s>=4.5;break;case"AAlarge":i=s>=3;break;case"AAAsmall":i=s>=7}return i},p.mostReadable=function(t,e,r){var o,i,s,n,a=null,c=0;i=(r=r||{}).includeFallbackColors,s=r.level,n=r.size;for(var h=0;h<e.length;h++)(o=p.readability(t,e[h]))>c&&(c=o,a=p(e[h]));return p.isReadable(t,a,{level:s,size:n})||!i?a:(r.includeFallbackColors=!1,p.mostReadable(t,["#fff","#000"],r))};var T=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},j=p.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(T);function D(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function M(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=h(e,l(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function L(t){return h(1,l(0,t))}function H(t){return parseInt(t,16)}function N(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function E(t){return i.round(255*parseFloat(t)).toString(16)}function F(t){return H(t)/255}var X=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(t){return!!X.CSS_UNIT.exec(t)}void 0!==t&&t.exports?t.exports=p:void 0===(o=function(){return p}.call(e,r,e,t))||(t.exports=o)}(Math)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),i=function(){function t(t){this.color=t,this.normalize()}return t.prototype.normalize=function(){var t=o(this.color),e=t.getAlpha(),r=t.toRgb(),i=t.toHsl(),s=t.toHsv();t.setAlpha(1),this.rgb=t.toRgbString(),this.rgba="rgba("+r.r+", "+r.g+", "+r.b+", "+e+")",this.hex=t.toHexString(),this.hsl=t.toHslString(),this.hsla="hsla("+Math.floor(i.h)+", "+Math.floor(100*i.s)+"%, "+Math.floor(100*i.l)+"%, "+e+")",this.hsv=t.toHsvString(),this.hsva="",this.source={rgba:{r:r.r,g:r.g,b:r.b,a:e},hsla:{h:Math.floor(i.h),s:Math.floor(100*i.s),l:Math.floor(100*i.l),a:e},hsv:{h:Math.floor(s.h),s:Math.floor(100*s.s),v:Math.floor(100*s.v),a:e}}},t.prototype.format=function(t){return"rgb"===t?this.rgb:"rgba"===t?this.rgba:"hex"===t?this.hex:"hsl"===t?this.hsl:"hsla"===t?this.hsla:"source"===t?this.source:this.hex},t.prototype.setOpacity=function(t){this.rgba="rgba("+this.source.rgba.r+", "+this.source.rgba.g+", "+this.source.rgba.b+", "+t+")",this.hsla="hsla("+this.source.hsla.h+", "+this.source.hsla.s+"%, "+this.source.hsla.l+"%, "+t+")",this.source.rgba.a=t,this.source.hsla.a=t},t.prototype.isValid=function(){return o(this.color).isValid()},t.process=function(e){return new t(e)},t}();e.Color=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=function(){function t(t,e,r,i){this.selector=t,this.picker=e,this.defaultPlacement=r,this.arrow=i;var s=this,n=this.getScrollParent(this.selector.get());this.processHandler=function(t){return s.process()},this.scrollParent=o.TsDom.select(n),this.scrollParent.on("scroll",this.processHandler),this.window=o.TsDom.select(window),this.window.on("scroll",this.processHandler)}return t.prototype.process=function(){var t=this.picker.attr("id"),e=o.TsDom.select("#"+t+":after"),r=e.width(),i=e.height(),s=this.selector.width(),n=this.selector.height(),a=this.selector.position().top,c=this.selector.position().left,h=this.picker.width(),l=this.picker.height(),u="bottom",p=this.defaultPlacement.split("-"),f=r/2;if("bottom"===(u=p.length>1?p[0]:this.defaultPlacement)){var d=a+n+i,g=0;if(c+h<o.TsDom.select(window).width())g=c,this.picker.removeClass("is-arrow-right").addClass("is-arrow-left"),s<(C=e.css("left"))+e.width()+Math.ceil(C/2)&&(g-=Math.ceil(C+f/2-s/2));else g=c+s-h,this.picker.removeClass("is-arrow-left").addClass("is-arrow-right"),s<(v=e.css("right"))+e.width()+Math.ceil(v/2)&&(g=g+3+(v+f/2-s/2));this.picker.css("top",d+"px"),this.picker.css("left",g+"px")}else if("top"===u){var C,v;d=a-l-i,g=0;if(c+h<o.TsDom.select(window).width())g=c,this.picker.css("left",g+"px"),this.picker.removeClass("is-arrow-right").addClass("is-arrow-left"),s<(C=e.css("left"))+e.width()+Math.ceil(C/2)&&(g-=Math.ceil(C+f/2-s/2));else g=c+s-h,this.picker.removeClass("is-arrow-left").addClass("is-arrow-right"),s<(v=e.css("right"))+e.width()+Math.ceil(v/2)&&(g=g+3+(v+f/2-s/2));this.picker.css("top",d+"px"),this.picker.css("left",g+"px")}else if("left"===u){d=a,g=c-h-r;if(a+l<o.TsDom.select(window).height())this.picker.removeClass("is-arrow-bottom").addClass("is-arrow-top"),n<(m=e.css("top"))+i+Math.ceil(m/2)&&(d-=Math.ceil(m+f/2-n/2));else d=a+n-l,this.picker.removeClass("is-arrow-top").addClass("is-arrow-bottom"),n<(b=e.css("bottom"))+e.height()+Math.ceil(b/2)&&(d=d+4+(b+f/2-n/2));this.picker.css("top",d+"px"),this.picker.css("left",g+"px")}else if("right"===u){var m,b;d=a,g=c+s+r;if(a+l<o.TsDom.select(window).height())this.picker.removeClass("is-arrow-bottom").addClass("is-arrow-top"),n<(m=e.css("top"))+i+Math.ceil(m/2)&&(d-=Math.ceil(m+f/2-n/2));else d=a+n-l,this.picker.removeClass("is-arrow-top").addClass("is-arrow-bottom"),n<(b=e.css("bottom"))+e.height()+Math.ceil(b/2)&&(d=d+4+(b+f/2-n/2));this.picker.css("top",d+"px"),this.picker.css("left",g+"px")}},t.prototype.destroy=function(){this.scrollParent.off("scroll"),this.window.off("scroll")},t.prototype.getScrollParent=function(t){var e=/(auto|scroll)/,r=function(t,e){return null===t.parentNode?e:r(t.parentNode,e.concat([t]))},o=function(t,e){return getComputedStyle(t,null).getPropertyValue(e)},i=function(t){return e.test(function(t){return o(t,"overflow")+o(t,"overflow-y")+o(t,"overflow-x")}(t))};return function(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var e=r(t.parentNode,[]),o=0;o<e.length;o+=1)if(i(e[o]))return e[o];return document.scrollingElement||document.documentElement}}(t)},t}();e.PickerPosition=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._uniqueId=function(t){return void 0===t&&(t=16),Math.random().toString(36).substr(2,t)}},function(t,e,r){t.exports=function(){"use strict";var t=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var r=Object.prototype.toString.call(t);return"[object RegExp]"===r||"[object Date]"===r||function(t){return t.$$typeof===e}(t)}(t)},e="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,r){var o=!r||!1!==r.clone;return o&&t(e)?i(function(t){return Array.isArray(t)?[]:{}}(e),e,r):e}function o(t,e,o){return t.concat(e).map(function(t){return r(t,o)})}function i(e,s,n){var a=Array.isArray(s),c=Array.isArray(e),h=n||{arrayMerge:o},l=a===c;if(l){if(a){var u=h.arrayMerge||o;return u(e,s,n)}return function(e,o,s){var n={};return t(e)&&Object.keys(e).forEach(function(t){n[t]=r(e[t],s)}),Object.keys(o).forEach(function(a){t(o[a])&&e[a]?n[a]=i(e[a],o[a],s):n[a]=r(o[a],s)}),n}(e,s,n)}return r(s,n)}return i.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,r){return i(t,r,e)},{})},i}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(7),s=r(6),n=r(5),a=function(){function t(e,r){void 0===r&&(r={}),this.options={color:"",inline:!1,placement:"bottom",format:"rgba",customClass:"",size:"default",arrow:!0,anchor:{hidden:!1,cssProperty:"color"},animation:"slide-in",hideInfo:!1,history:{hidden:!1,placeholdersAmount:10,colors:[]}},this.events={change:function(t){}};this.anchor=o.TsDom.select(e),this.id="colorpicker-"+s._uniqueId(),this.anchorId=this.id+"-anchor",this.cssId="#"+this.id,this.cssAnchorId="#"+this.anchorId,this.options=i.all([this.options,this.getDefaultOptions(),t.globalOptions,r],{arrayMerge:function(t,e,r){return e}}),this.document=o.TsDom.select(document),this.initPicker(),this.update(),this.initAnchor()}return t.prototype.setColor=function(t){this.options.color=t,this.update()},t.prototype.show=function(){this.bindCommonEvents(),this.picker.removeClass(this.options.animation).addClass(this.options.animation).addClass("is-opened").addClass("colorpicker--position-"+this.options.placement),this.detectPickerPosition(),this.afterShow()},t.prototype.hide=function(){this.picker.hasClass("is-opened")&&(this.pickerPosition.destroy(),this.unBindCommonEvents(),this.picker.removeClass("is-opened"),this.anchor.get(0).blur())},t.prototype.destroy=function(){},t.prototype.unBindCommonEvents=function(){this.options.inline||this.document.off("mousedown")},t.prototype.on=function(t,e){this.events[t]=e},t.prototype.setAnchorCssProperty=function(t){this.options.anchor.cssProperty=t},t.prototype.setPlacement=function(t){this.options.placement=t},t.setGlobalOptions=function(e){t.globalOptions=e},t.prototype.initPicker=function(){this.buildLayout(),this.picker.addClass(this.getPickerCssClassName()+"--size-"+this.options.size),this.options.arrow||this.picker.addClass("colorpicker--no-arrow"),this.addCustomClass(),this.options.inline?(this.anchor.parent().hasClass("colorpicker-input")?this.anchor.parent().insertAfter(this.picker):this.anchor.insertAfter(this.picker),this.anchor.addClass("colorpicker-anchor--inline"),this.picker.addClass("colorpicker--inline")):o.TsDom.select("body").append(this.picker),this.bindEvents()},t.prototype.bindCommonEvents=function(){var t=this;this.options.inline||this.document.on("click",function(e){var r=o.TsDom.select(e.target).closest(".colorpicker");r.length()&&r.attr("id")===t.picker.attr("id")||e.target===t.anchor.get(0)||t.hide()})},t.prototype.initAnchor=function(){var t=this,e=this,r=function(t){e.hideAllActivePickers(),e.show(),t.stopPropagation()};if(this.anchor.addClass("colorpicker-anchor"),this.options.anchor.hidden&&this.anchor.hide(),this.anchor.is("input")){this.anchor.val(e.getColor().toString()).on("input",function(e){t.setColor(t.anchor.val()),t.updateAnchorColor(e,!1)});var o=this.anchor.parent().find("[data-color]");o.length()&&o.css("background",e.getColor()),this.options.inline||this.anchor.on("focus",r)}else this.anchor.find("[data-color]").length()?this.anchor.find("[data-color]").css("background",e.getColor()):this.anchor.css(e.options.anchor.cssProperty,e.getColor()),this.options.inline||this.anchor.on("click",r);this.picker.on("colorpicker:color-change",function(e){t.updateAnchorColor(e)}),this.picker.on("colorpicker:hide",function(e){t.hide()})},t.prototype.updateAnchorColor=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!0);t.detail.enableHidePicker&&this.options.hideAfterColorChange&&!this.options.inline&&this.hide();var r=null;e&&this.anchor.val(this.getColor().toString()),(r=this.anchor.parent().hasClass("colorpicker-input")?this.anchor.parent().find("[data-color]"):this.anchor.find("[data-color]")).length()?r.css("background-color",this.getColor()):this.anchor.is("input")||this.anchor.css(this.options.anchor.cssProperty,this.getColor()),this.events.change.apply(this,[this.getColorObject()])},t.prototype.hideAllActivePickers=function(){o.TsDom.select(".colorpicker.is-opened:not("+this.cssId+"):not(.colorpicker--inline)").trigger("colorpicker:hide")},t.prototype.addCustomClass=function(){this.picker.addClass(this.options.customClass)},t.prototype.detectPickerPosition=function(){var t=this;this.pickerPosition=new n.PickerPosition(this.anchor,this.picker,this.options.placement,this.options.arrow),this.pickerPosition.process(),this.picker.on("colorpicker:refresh-position",function(e){t.pickerPosition.process()})},t.prototype.dispatchColorChangedEvent=function(t){void 0===t&&(t=!0),this.picker.trigger("colorpicker:color-change",{color:this.getColor(),enableHidePicker:t})},t.prototype.dispatchRefreshPositionEvent=function(){this.picker.trigger("colorpicker:refresh-position")},t.prototype.afterShow=function(){},t.globalOptions={},t}();e.ColorPicker=a},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=r(8),s=r(4),n=r(0),a=r(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.buildLayout=function(){var t=this;this.picker=n.TsDom.create("div").addClass("colorpicker").addClass("colorpicker-default").attr("id",this.id);var e=n.TsDom.create("div").addClass("colorpicker-default__body"),r=n.TsDom.create("div").addClass("colorpicker-default__info");this.options.hideInfo&&r.addClass("colorpicker-default__info--hidden"),this.spectrumContainer=n.TsDom.create("div").addClass("colorpicker-default__spectrum-container"),this.spectrumCanvas=n.TsDom.create("canvas").addClass("colorpicker-default__spectrum-canvas"),this.spectrumCursor=n.TsDom.create("div").addClass("colorpicker-default__spectrum-cursor"),this.spectrumContainer.append(this.spectrumCanvas).append(this.spectrumCursor),this.hueContainer=n.TsDom.create("div").addClass("colorpicker-default__hue-container"),this.hueCanvas=n.TsDom.create("canvas").addClass("colorpicker-default__hue-canvas"),this.hueCursor=n.TsDom.create("div").addClass("colorpicker-default__hue-cursor"),this.hueContainer.append(this.hueCanvas).append(this.hueCursor),this.opacityContainer=n.TsDom.create("div").addClass("colorpicker-default__opacity-container"),this.opacityCanvas=n.TsDom.create("canvas").addClass("colorpicker-default__opacity-canvas"),this.opacityCursor=n.TsDom.create("div").addClass("colorpicker-default__opacity-cursor");var o=n.TsDom.create("div").addClass("colorpicker-default__hex-input-container"),i=n.TsDom.create("div").addClass("colorpicker-default__hex-text").text("hex");this.hexInput=n.TsDom.create("input").addClass("colorpicker-default__hex-input").attr("maxlength",7),o.append(this.hexInput).append(i);var a=n.TsDom.create("div").addClass("colorpicker-default__r-input-container"),c=n.TsDom.create("div").addClass("colorpicker-default__r-text").text("r");this.rInput=n.TsDom.create("input").addClass("colorpicker-default__r-input").attr("maxlength",3),a.append(this.rInput).append(c);var h=n.TsDom.create("div").addClass("colorpicker-default__g-input-container"),l=n.TsDom.create("div").addClass("colorpicker-default__g-text").text("g");this.gInput=n.TsDom.create("input").addClass("colorpicker-default__g-input").attr("maxlength",3),h.append(this.gInput).append(l);var u=n.TsDom.create("div").addClass("colorpicker-default__b-input-container"),p=n.TsDom.create("div").addClass("colorpicker-default__b-text").text("b");this.bInput=n.TsDom.create("input").addClass("colorpicker-default__b-input").attr("maxlength",3),u.append(this.bInput).append(p);var f=n.TsDom.create("div").addClass("colorpicker-default__a-input-container");this.aInput=n.TsDom.create("input").addClass("colorpicker-default__a-input").attr("maxlength",4);var d=n.TsDom.create("div").addClass("colorpicker-default__a-text").text("a");f.append(this.aInput).append(d),this.history=n.TsDom.create("div").addClass("colorpicker-default__history"),this.options.history.hidden&&this.history.addClass("is-hidden");var g=n.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("is-add-new");this.history.append(g),this.options.history.colors.forEach(function(e){var r=n.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("has-color").css("background",e).attr("data-history-color",new s.Color(e).rgba);t.history.append(r)});for(var C=0;C<this.options.history.placeholdersAmount-this.options.history.colors.length;C++){var v=n.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("is-empty").attr("data-history-color","");this.history.append(v)}this.opacityContainer.append(this.opacityCanvas).append(this.opacityCursor),e.append(this.spectrumContainer).append(this.hueContainer).append(this.opacityContainer),r.append(o).append(a).append(h).append(u).append(f),this.picker.append(e).append(r).append(this.history)},e.prototype.bindEvents=function(){var t=this,e=this;this.spectrumCursor.on("dragstart",function(t){t.stopPropagation(),t.preventDefault()}),this.spectrumContainer.on("mousedown",function(r){1==r.which&&(t.initDragObject(r,e.spectrumCursor,e.spectrumCanvas),t.processCursorPosition(t.spectrumCursor,t.spectrumCanvas,t.dragObject.shiftX,t.dragObject.shiftY),t.spectrumColor=t.setCursorColorFromCursorPosition(t.spectrumCursor,t.spectrumCanvas,t.dragObject.shiftX,t.dragObject.shiftY),t.setOpacityGradientAndCursorColor(),t.setColorValuesToInputs(),t.dispatchColorChangedEvent())}),this.hueContainer.on("mousedown",function(r){if(1==r.which){t.initDragObject(r,t.hueCursor,t.hueCanvas),t.dragObject.processShiftX=!1,t.processCursorPosition(e.hueCursor,e.hueCanvas,e.dragObject.shiftX,e.dragObject.shiftY,e.dragObject.processShiftX),t.hueColor=t.setCursorColorFromCursorPosition(e.hueCursor,e.hueCanvas,e.dragObject.shiftX,e.dragObject.shiftY),t.fillSpectrumCanvas();var o=t.getCursorCoords(t.spectrumCursor);t.spectrumColor=t.setCursorColorFromCursorPosition(e.spectrumCursor,e.spectrumCanvas,o.shiftX,o.shiftY),t.fillOpacityCanvas(),t.setOpacityGradientAndCursorColor(),t.setColorValuesToInputs(),t.dispatchColorChangedEvent()}}),this.opacityContainer.on("mousedown",function(r){1==r.which&&(t.initDragObject(r,t.opacityCursor,t.opacityCanvas),t.dragObject.processShiftX=!1,t.processCursorPosition(e.opacityCursor,e.opacityCanvas,e.dragObject.shiftX,e.dragObject.shiftY,e.dragObject.processShiftX),t.changeAInputValue(e.dragObject.shiftY),t.setCursorColorFromCursorPosition(e.opacityCursor,e.opacityCanvas,e.dragObject.shiftX,e.dragObject.shiftY,+t.aInput.val()),t.dispatchColorChangedEvent())}),this.hexInput.on("keyup",function(e){var r=t.hexInput.val();/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)&&(t.spectrumColor=s.Color.process(r),t.setHueCursorPosition(),t.fillSpectrumCanvas(),t.fillOpacityCanvas(),t.setSpectrumCursorPositionByColor(t.spectrumColor),t.setOpacityGradientAndCursorColor(),t.rInput.val(t.spectrumColor.source.rgba.r),t.gInput.val(t.spectrumColor.source.rgba.g),t.bInput.val(t.spectrumColor.source.rgba.b),t.dispatchColorChangedEvent())}),this.rInput.on("keyup",function(e){t.onChangeInputValue(t.rInput)}),this.gInput.on("keyup",function(e){t.onChangeInputValue(t.gInput)}),this.bInput.on("keyup",function(e){t.onChangeInputValue(t.bInput)}),this.aInput.on("keyup",function(e){var r=t.aInput.val();r.match(/^\d*(\.\d+)?$/)&&r>=0&&r<=1&&(t.setOpacityCursorPosition(r),t.dispatchColorChangedEvent())}),n.TsDom.select(document).on("mousemove",function(r){if(t.dragObject){var o=t.dragObject.shiftX,i=t.dragObject.shiftY;if(t.dragObject.processShiftX)o=r.clientX-t.dragObject.downX+t.dragObject.shiftX;if(t.dragObject.processShiftY)i=r.clientY-t.dragObject.downY+t.dragObject.shiftY;if(t.processCursorPosition(t.dragObject.elements.cursor,t.dragObject.elements.canvas,o,i,t.dragObject.processShiftX,t.dragObject.processShiftY),t.dragObject.elements.cursor.hasClass("colorpicker-default__spectrum-cursor"))t.spectrumColor=t.setCursorColorFromCursorPosition(t.spectrumCursor,t.spectrumCanvas,o,i),t.setOpacityGradientAndCursorColor(),t.setColorValuesToInputs(),t.dispatchColorChangedEvent();else if(t.dragObject.elements.cursor.hasClass("colorpicker-default__hue-cursor")){t.hueColor=t.setCursorColorFromCursorPosition(e.hueCursor,e.hueCanvas,o,i),t.fillSpectrumCanvas();var s=t.getCursorCoords(t.spectrumCursor);t.spectrumColor=t.setCursorColorFromCursorPosition(e.spectrumCursor,e.spectrumCanvas,s.shiftX,s.shiftY),t.fillOpacityCanvas(),t.setOpacityGradientAndCursorColor(),t.setColorValuesToInputs(),t.dispatchColorChangedEvent()}else t.dragObject.elements.cursor.hasClass("colorpicker-default__opacity-cursor")&&(t.changeAInputValue(i),t.setCursorColorFromCursorPosition(e.opacityCursor,e.opacityCanvas,o,i,+t.aInput.val()),t.dispatchColorChangedEvent())}}).on("mouseup",function(e){t.dragObject=null}),this.history.find(".is-add-new").on("click",function(e){var r=t.getColorObject().rgba,o=!1;if(t.history.find(".is-empty").length())t.history.find(".is-empty").each(function(e){var i=n.TsDom.select(e);t.history.find('[data-history-color="'+r+'"]').length()&&(o=!0),i.data("history-color")||o||(o=!0,i.css("background",r).attr("data-history-color",r).removeClass("is-empty").addClass("has-color"))});else if(!t.history.find('[data-history-color="'+r+'"]').length()){var i=n.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("has-color").css("background",r).attr("data-history-color",r);t.history.append(i)}}),this.history.on("click",function(e){var r=n.TsDom.select(e.target);if(r.hasClass("has-color")){var o=r.data("history-color");t.setColor(o)}}),this.picker.on("contextmenu",function(t){return t.stopPropagation(),t.preventDefault(),!1})},e.prototype.refresh=function(){},e.prototype.onChangeInputValue=function(t){var e=+t.val();e>=0&&e<=255&&(this.spectrumColor=s.Color.process(this.getColorFromInputs()),this.setHueCursorPosition(),this.fillSpectrumCanvas(),this.fillOpacityCanvas(),this.spectrumColor=this.setSpectrumCursorPositionByColor(this.spectrumColor),this.hexInput.val(this.spectrumColor.hex),this.setOpacityGradientAndCursorColor(),this.dispatchColorChangedEvent())},e.prototype.getColorFromInputs=function(){return"rgba("+this.rInput.val()+", "+this.gInput.val()+", "+this.bInput.val()+", "+this.aInput.val()+")"},e.prototype.getCursorCoords=function(t){return{shiftX:t.offset().left+Math.floor(t.width()/2),shiftY:t.offset().top+Math.floor(t.height()/2)}},e.prototype.setOpacityGradientAndCursorColor=function(){var t=+this.aInput.val(),e=+(this.opacityCanvas.height()*t).toFixed(0)-this.opacityCursor.height()/2,r=this.opacityCanvas.width()/2-this.opacityCursor.width()/2;this.fillOpacityCanvas(),this.setCursorColorFromCursorPosition(this.opacityCursor,this.opacityCanvas,r,e,t)},e.prototype.initDragObject=function(t,e,r){if(t.stopPropagation(),t.preventDefault(),1==t.which){var o=t.clientX-r.position().left-Math.floor(e.width()/2),i=t.clientY-r.position().top-Math.floor(e.height()/2);this.dragObject={elements:{cursor:e,canvas:r},downX:t.clientX,downY:t.clientY,shiftX:o,shiftY:i,processShiftX:!0,processShiftY:!0}}},e.prototype.update=function(){this.options.color||(this.options.color=this.options.defaultColor),s.Color.process(this.options.color).isValid()&&this.processUpdate()},e.prototype.processUpdate=function(){this.spectrumColor=s.Color.process(this.options.color),this.currentColor=s.Color.process(this.options.color),this.aInput.val(this.spectrumColor.source.rgba.a),this.setColorValuesToInputs(),this.spectrumCanvas.attr("width",this.spectrumCanvas.width()).attr("height",this.spectrumCanvas.height()),this.spectrumCanvas.get().getContext("2d").clearRect(0,0,this.spectrumCanvas.width(),this.spectrumCanvas.height()),this.hueCanvas.attr("width",this.hueCanvas.width()).attr("height",this.hueCanvas.height()),this.opacityCanvas.attr("width",this.opacityCanvas.width()).attr("height",this.opacityCanvas.height()),this.fillHueCanvas(),this.setHueCursorPosition(),this.fillSpectrumCanvas(),this.fillOpacityCanvas(),this.setSpectrumCursorPositionByColor(this.spectrumColor),this.setOpacityCursorPosition(this.spectrumColor.source.rgba.a)},e.prototype.getColor=function(){var t=this.spectrumColor?s.Color.process(this.getColorFromInputs()):s.Color.process(this.options.color);return this.aInput.val()&&t.setOpacity(this.aInput.val()),t.format(this.options.format)},e.prototype.getColorObject=function(){return this.spectrumColor?s.Color.process(this.getColorFromInputs()):s.Color.process(this.options.color)},e.prototype.setSpectrumCursorPositionByColor=function(t){var e=this.spectrumCanvas.width(),r=this.spectrumCanvas.height(),o=t.format("source").hsv,i=Math.floor(e/100*o.s),s=r-Math.floor(r/100*o.v);return i-=this.spectrumCursor.width()/2,s-=this.spectrumCursor.height()/2,this.processCursorPosition(this.spectrumCursor,this.spectrumCanvas,i,s),this.setCursorColorFromCursorPosition(this.spectrumCursor,this.spectrumCanvas,i,s)},e.prototype.setHueCursorPosition=function(){for(var t=this.picker.find(".colorpicker-default__hue-canvas"),e=t.height(),r=t.get().getContext("2d"),o=[],i={},n=0;n<e;n++){var c=r.getImageData(0,n,1,1).data,h=s.Color.process("rgb("+c[0]+", "+c[1]+", "+c[2]+")").format("hex");o.push(h),i[h]=n}this.options.hueColors.forEach(function(t){o.push(t.color),i[t.color]=Math.ceil(e/100*(100*t.offset))});var l=a.from(o)(this.currentColor.hex);this.hueColor=s.Color.process(l);var u=i[l],p=this.picker.find(".colorpicker-default__hue-cursor"),f=Math.ceil(t.width()/2)-Math.ceil(p.width()/2);return this.processCursorPosition(p,t,f,u),this.setCursorColorFromCursorPosition(p,t,f,u)},e.prototype.setOpacityCursorPosition=function(t){var e=+(this.opacityCanvas.height()*t).toFixed(0);e-=this.opacityCursor.height()/2;var r=Math.ceil(this.opacityCanvas.width()/2)-Math.ceil(this.opacityCursor.width()/2);return this.processCursorPosition(this.opacityCursor,this.opacityCanvas,r,e),this.setCursorColorFromCursorPosition(this.opacityCursor,this.opacityCanvas,r,e,+this.aInput.val())},e.prototype.fillSpectrumCanvas=function(){var t=this.spectrumCanvas.width(),e=this.spectrumCanvas.height(),r=this.spectrumCanvas.get().getContext("2d");r.clearRect(0,0,t,e);var o=r.createLinearGradient(0,0,t,0);o.addColorStop(0,"#fff"),o.addColorStop(.01,"#fff"),o.addColorStop(.99,this.hueColor.rgb),o.addColorStop(1,this.hueColor.rgb),r.fillStyle=o,r.fillRect(0,0,t,e);var i=r.createLinearGradient(0,0,0,e);i.addColorStop(.01,"transparent"),i.addColorStop(.99,"#000"),i.addColorStop(1,"#000"),r.fillStyle=i,r.fillRect(0,0,t,e)},e.prototype.fillHueCanvas=function(){var t=this.hueCanvas.get().getContext("2d"),e=t.createLinearGradient(0,0,0,this.hueCanvas.height());this.options.hueColors.forEach(function(t){e.addColorStop(t.offset,t.color)}),t.fillStyle=e,t.fillRect(0,0,this.hueCanvas.width(),this.hueCanvas.height())},e.prototype.fillOpacityCanvas=function(){var t=this.opacityCanvas.get().getContext("2d");t.clearRect(0,0,this.opacityCanvas.width(),this.opacityCanvas.height());var e=t.createLinearGradient(0,0,0,this.opacityCanvas.height());e.addColorStop(0,"transparent"),e.addColorStop(1,this.spectrumColor.rgb),t.fillStyle=e,t.fillRect(0,0,this.opacityCanvas.width(),this.opacityCanvas.height())},e.prototype.setCursorColorFromCursorPosition=function(t,e,r,o,i){void 0===i&&(i=1);var n=e.get().getContext("2d"),a=Math.ceil(t.width()/2)+r,c=Math.ceil(t.height()/2)+o;(a<=0||0===r)&&(a=0),(c<=0||0===o)&&(c=0),a>=e.width()&&(a=e.width()-1),c>=e.height()&&(c=e.height()-1);var h=n.getImageData(a,c,1,1).data,l="rgba("+h[0]+", "+h[1]+", "+h[2]+", "+i+")",u=s.Color.process(l);return t.css("background-color",u.rgba),u},e.prototype.dispatchColorChangedEvent=function(){n.TsDom.select(this.cssId).trigger("colorpicker:color-change",{color:this.getColor().toString()})},e.prototype.processCursorPosition=function(t,e,r,o,i,s){if(void 0===i&&(i=!0),void 0===s&&(s=!0),i){var n=t.width()/2;r+n<0&&r<=-n&&(r=-n),r>e.width()-n&&(r=e.width()-n)}else r=Math.ceil(e.width()/2)-Math.ceil(t.width()/2);if(s){var a=t.height()/2;o+a<0&&o<=-a&&(o=-a),o>e.height()-a&&(o=e.height()-a)}else o=Math.ceil(e.height()/2)-Math.ceil(t.height()/2);t.css("left",r+"px"),t.css("top",o+"px")},e.prototype.changeAInputValue=function(t){var e=+(t/this.opacityCanvas.height()).toFixed(2);e<=0?e=0:e>=1&&(e=1),this.aInput.val(e)},e.prototype.setColorValuesToInputs=function(){var t=this.spectrumColor,e=t.hex,r=t.source.rgba;this.hexInput.val(e),this.rInput.val(r.r),this.gInput.val(r.g),this.bInput.val(r.b)},e.prototype.getPickerCssClassName=function(){return"colorpicker-default"},e.prototype.getDefaultOptions=function(){return{defaultColor:"#f00",hueColors:[{offset:0,color:"#ff0000"},{offset:.17,color:"#ff00ff"},{offset:.33,color:"#0000ff"},{offset:.5,color:"#00ffff"},{offset:.67,color:"#00ff00"},{offset:.83,color:"#ffff00"},{offset:1,color:"#ff0000"}]}},e}(i.ColorPicker);t.exports=c}])});
