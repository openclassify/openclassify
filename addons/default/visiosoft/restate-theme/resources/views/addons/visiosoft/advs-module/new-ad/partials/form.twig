<div class="adpost-details">
    <div class="row">
        <div class="col-md-12">
            {% set requiredFields = setting_value('visiosoft.module.advs::make_all_fields_required') %}
            {% set form = form('advs', 'advs').get() %}
            {{ form_open({
                'id': 'createEditAdvForm',
                'class': 'form ' ~ form.options.class ,
                'enctype': 'multipart/form-data',
                'url': 'advs/save_adv',
            })|raw }}

            <input type="hidden" value="pending_user" name="status">
            <input type="hidden" id="cat1input" name="cat1" value="{{ cats.cat1 }}">
            <input type="hidden" id="cat2input" name="cat2" value="{{ cats.cat2 }}">
            <input type="hidden" id="cat3input" name="cat3" value="{{ cats.cat3 }}">
            <input type="hidden" id="cat4input" name="cat4" value="{{ cats.cat4 }}">
            <input type="hidden" id="cat5input" name="cat5" value="{{ cats.cat5 }}">
            <input type="hidden" id="cat6input" name="cat6" value="{{ cats.cat6 }}">
            <input type="hidden" id="cat7input" name="cat7" value="{{ cats.cat7 }}">
            <input type="hidden" id="cat8input" name="cat8" value="{{ cats.cat8 }}">
            <input type="hidden" id="cat9input" name="cat9" value="{{ cats.cat9 }}">
            <input type="hidden" id="cat10input" name="cat10" value="{{ cats.cat10 }}">
            <input type="hidden" id="currencies" name="currencies" value="">
            <input type="hidden" name="update_id" value="{{ id }}">
            <fieldset>
                {#
                <div class="shadow-sm border p-3 rounded bg-white" id="new-cats-area">
                    <span class="font-weight-bold fs-20">{{ trans('visiosoft.theme.restate::field.ad_category') }}</span>
                    <div class="d-flex p-3 bg-special-6 mt-3 rounded overflow-auto bg-white">
                        <div class="d-flex flex-column w-100 ">
                            <div class="d-flex align-items-center">
                                <div class="form-group mb-0 flex-grow-1">
                                    <label for="category"
                                           class="text-nowrap">{{ trans('visiosoft.theme.restate::field.category') }}
                                        <span class="colorFive">*</span></label>
                                    <div class="d-flex align-items-center justify-content-between mr-1">
                                        <select id="cat1" name="cat1" data-id="1"
                                                class="form-control selectWidth shadow-none borderThree">
                                            <option value="0">{{ trans('visiosoft.theme.restate::field.choose_a_category') }}</option>
                                            {% for cat in main_cats %}
                                                <option value="{{ cat.id }}"
                                                        data-value="{{ cat.id }}">{{ cat.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                {% for i in 2..10 %}
                                    <div class="form-group mb-0 flex-grow-1 mx-2 cat-item-2">
                                <span class="d-flex align-items-end">
                                    <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                                         viewBox="0 0 32 32">
                                        <g fill="none" fill-rule="evenodd">
                                            <g>
                                                <g transform="translate(-351 -284) translate(351 284)">
                                                    <circle cx="16" cy="16" r="15" stroke="#E1E1E1"
                                                            stroke-width="2"></circle>
                                                    <path fill="#C7C7C7"
                                                          d="M16.908 10.268c.478-.384 1.171-.354 1.611.082L24 15.78l-5.498 5.446c-.479.474-1.243.47-1.718.002l.04.036-.053-.059c-.36-.44-.359-1.063-.004-1.499l.088-.097 2.525-2.503H9c-.552 0-1-.447-1-1v-.143c0-.552.448-1 1-1h10.896l-3.017-2.989c-.434-.43-.464-1.123-.081-1.596l.049-.056z">
                                                    </path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                    <span class="w-100 mx-1">
                                        <label for="inputState"
                                               class="text-nowrap">{{ trans('visiosoft.theme.restate::field.category') }} {{ i }} <span
                                                    class="colorFive">*</span></label>
                                        <div class="d-flex align-items-center justify-content-between">
                                            <select id="cat{{ i }}" name="cat{{ i }}" data-id="{{ i }}"
                                                    class="form-control selectWidth shadow-none borderThree">
                                            </select>
                                            <div class="w_32 mx-auto">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                                                    <g fill="none" fill-rule="evenodd">
                                                        <g>
                                                            <g transform="translate(-351 -284) translate(351 284)">
                                                                <circle cx="16" cy="16" r="15" stroke="#E1E1E1"
                                                                        stroke-width="2"></circle>
                                                                <path fill="#C7C7C7"
                                                                      d="M16.908 10.268c.478-.384 1.171-.354 1.611.082L24 15.78l-5.498 5.446c-.479.474-1.243.47-1.718.002l.04.036-.053-.059c-.36-.44-.359-1.063-.004-1.499l.088-.097 2.525-2.503H9c-.552 0-1-.447-1-1v-.143c0-.552.448-1 1-1h10.896l-3.017-2.989c-.434-.43-.464-1.123-.081-1.596l.049-.056z">
                                                                </path>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </div>
                                        </div>
                                    </span>
                                </span>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                #}
                <div class="shadow-sm border p-3 rounded mt-5 bg-white">
                    <div class=" mt-4 d-flex flex-column bg-white">
                        <span class="font-weight-bold fs-20">{{ trans('visiosoft.module.advs::field.ad_info') }}</span>
                        <div class="p-3 bg-special-6 mt-3 rounded bg-white">
                            {% set fields = form.fields.base().pluck('field_name').all() %}
                            {% for field in form.fields.translations('name') %}
                                {{ field.setAttributes({
                                    'class': 'form-control shadow-none focusBorder'
                                }).render({'form': form})|raw }}
                            {% endfor %}
                        </div>

                        <div class="p-3">
                            <form class="w-100">
                                <div class="form-group mb-0">
                                    {% for field in form.fields.translations('advs_desc') %}
                                        {{ field.setAttributes({
                                            'class': 'form-control borderThree focusBorder outlineNone p-2 rounded shadow-none'
                                        }).render({'form': form})|raw }}
                                    {% endfor %}
                                </div>
                            </form>
                        </div>
                        {% if setting_value('visiosoft.module.advs::market_place') %}
                            {#                            {{ addBlock('new-ad/fields', {'adv': adv})|raw }} #}
                        {% endif %}


                        <div class="p-3 bg-special-6 rounded mt-2">
                            <div id="priceInput" class="d-flex justify-content-between mb-4 flex-wrap">
                                <div class="mb-3 mb-sm-0 select-price flex-fill mx-1 {{ hidePrice ? ' hidden' }}">
                                    <label>
                                        {{ form.fields.price.label|raw }}
                                        <span class="required">*</span>
                                    </label>

                                    <div class="col-12 priceHidden d-none">
                                        {{ form.fields.price.setAttributes({
                                            'required' :true,
                                        }).input|raw }}
                                    </div>

                                    <div class="d-flex">
                                        {% set PriceValue = form.fields.price.value|split('.') %}
                                        <input type="text"
                                               class="form-control shadow-none focusBorder inputWidth w-fit"
                                               placeholder="0" value="{{ PriceValue|first }}">
                                        {% if setting_value('visiosoft.field_type.decimal::showDecimal') %}
                                            <input class="form-control shadow-none focusBorder inputWidth w-fit priceDecimalField decimal-price"
                                                   placeholder="00" type="text" value="{{ PriceValue[1] }}">
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="select-price flex-fill mx-1">
                                    {% set HideStandardPrice = setting_value('visiosoft.module.advs::hide_standard_price_field') or setting_value('visiosoft.module.advs::market_place') != true ? ' d-none' %}

                                    <label>
                                            <span class="{{ HideStandardPrice }}">
                                                {{ form.fields.standard_price.label }}
                                                <span class="required">*</span>
                                            </span>
                                    </label>

                                    <div class="col-12 standard-price-hidden d-none">
                                        {{ form.fields.standard_price.setAttributes({
                                            'required' :true
                                        }).input|raw }}
                                    </div>

                                    <div class="d-flex">
                                        <div class="d-flex flex-fill {{ HideStandardPrice }}">
                                            {% set standardPriceValue = form.fields.standard_price.value|split('.') %}
                                            <input class="form-control shadow-none focusBorder inputWidth w-fit flex-fill"
                                                   placeholder="0" value="{{ standardPriceValue|first }}"
                                                   type="text">
                                            {% if setting_value('visiosoft.field_type.decimal::showDecimal') %}
                                                <input class="form-control shadow-none focusBorder inputWidth w-fit standard-price-decimal decimal-price"
                                                       placeholder="00" type="text"
                                                       value="{{ standardPriceValue[1] }}"
                                                       maxlength="2">
                                            {% endif %}
                                        </div>
                                        <select name="currency"
                                                class="form-control w-fit shadow-none borderThree fs-13 ml-2 w-auto"
                                                id="currency" required>
                                            {% for currency in config_get('streams::currencies.enabled') %}
                                                <option value="{{ currency }}">
                                                    {{ currency == "TRY" ? currency_symbol(currency) : currency }}
                                                </option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h5 class="mt-5 pb-1 border-bottom upload-photos-title">
                            {{ trans('visiosoft.module.advs::field.upload_photos') }}
                        </h5>
                        <div class="bg-white p-4 upload-photos-wrapper">
                            <div class="row form-group images">
                                <div class="col-md-12">
                                    {{ form.fields.files.input |raw }}
                                    <input name="doc_files"
                                           value="{{ form.fields.doc_files.value.pluck('id').all()|join(',') }}"
                                           hidden>
                                    <div class="doc_list small">
                                        {% for docs in form.fields.doc_files.value %}
                                            <a id="{{ docs.id }}" href="javascript:void(0)"
                                               onclick="deleteDocs({{ docs.id }})" class="text-dark">
                                                {{ docs.name }}
                                                <i class="fa fa-trash text-danger pl-2"></i>
                                            </a><br>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="p-3 rounded mt-2">
                            <h5 class="mt-5 pb-1 border-bottom">
                                {{ trans('visiosoft.module.advs::field.additional_fields') }}
                            </h5>
                            <div class="bg-white custom-fields-area p-4 row">
                                {% include 'visiosoft.module.customfields::new-ad/other-fields' with {'custom_fields':custom_fields,'id':id} %}
                            </div>
                        </div>
                    </div>
                </div>


                {% if setting_value('visiosoft.module.location::create_ad_page_location') %}
                    <h5 class="mt-5 pb-1 border-bottom">
                        {{ trans('visiosoft.module.advs::field.ad_location') }}
                    </h5>
                    <div class="bg-light p-4 mb-4">
                        {% include "visiosoft.module.location::new-ad/map" %}

                        <input value="{{ adv.map_Val }}" name="map_Val" data-max="255" data-mask=""
                               data-alias="" data-regex=""
                               type="text" placeholder="" class="hidden d-none mapVal" data-field="map_Val"
                               data-field_name="map_Val" data-provides="anomaly.field_type.text">
                    </div><!-- section -->
                {% endif %}

                <div class="checkbox section agreement">
                    {% if setting_value('visiosoft.module.advs::show_post_ad_agreement') %}
                        <label for="send">
                            <input type="checkbox" name="send" id="send" required>

                            {{ trans('visiosoft.module.advs::message.agreement') }}
                        </label><br>
                    {% endif %}

                    {{ form.actions|raw }}
                </div><!-- section -->

            </fieldset>

        </div>
    </div><!-- photos-ad -->

</div>
{{ form.close|raw }}
