{% extends "theme::layouts/default" %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-12 col-sm-8 col-md-6 col-lg-4 text-left bg-light p-3 m-0">
            {% set form = form('register2').redirect(request_get('redirect', '/'))
                .get() %}
            {{ form_open({
                'class': 'row form ' ~ form.options.class ,
                'enctype': 'multipart/form-data',
                'url':form.options.url
            })|raw }}
            <div class="col-12">
                <div class="form-group display_name-field display_name-field_type">
                    <label class="control-label">
                        {{ trans('visiosoft.theme.base::field.first_name') }}
                        <span class="required">*</span>
                    </label>

                    <div class="input-wrapper">
                        {{ form.fields.first_name.setPlaceholder(trans('visiosoft.theme.base::field.first_name')).input|raw }}
                        {{ form.fields.username.setValue(random()).setAttributes({
                            'class' :'hidden',
                        }).input|raw }}
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="form-group username-field username-field_type">
                    <label class="control-label">
                        {{ trans('visiosoft.theme.base::field.last_name') }}
                        <span class="required">*</span>
                    </label>

                    <div class="input-wrapper">
                        {{ form.fields.last_name.setPlaceholder(trans('visiosoft.theme.base::field.last_name')).input|raw }}
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="form-group email-field phone-field_type register-phone">
                    <label class="control-label">
                        {{ trans('visiosoft.theme.base::field.phone_number') }}
                        <span class="required">*</span>
                    </label>

                    <div class="input-wrapper">
                        {{ form.fields.phone.setValue(form.fields.full_phone.value).input|raw }}
                    </div>
                </div>
            </div>
            {% if setting_value('visiosoft.module.advs::register_email_field') %}
                <div class="col-12">
                    <div class="form-group email-field email-field_type">
                        <label class="control-label">
                            {{ trans('visiosoft.theme.base::field.email') }}
                            <span class="required">*</span>
                        </label>

                        <div class="input-wrapper">
                            {{ form.fields.email.setPlaceholder(trans('visiosoft.theme.base::field.email')).input|raw }}
                        </div>
                    </div>
                </div>
            {% else %}
                {% set domain = config('app.url')|replace({ ('https://'): '',('http://'): '',('/'): '/' }) %}
                {% if domain == "localhost" %}
                    {% set domain = "example.com" %}
                {% endif %}
                {{ form.fields.email.setValue(random()~"@"~domain).setAttributes({
                    'class' :'hidden',
                }).input|raw }}
            {% endif %}
            <div class="col-12">
                <div class="form-group password-field password-field_type">
                    <label class="control-label">
                        {{ trans('visiosoft.theme.base::field.password') }}
                        <span class="required">*</span>
                    </label>

                    <div class="input-wrapper">
                        {{ form.fields.password.setPlaceholder(trans('visiosoft.theme.base::field.password')).input|raw }}
                    </div>
                </div>
            </div>
            <div class="col-12 row m-0">
                <div class="col-6 pr-0 pl-1">
                    <button class="btn btn-sm btn-success  w-100 py-2">
                        <i class="fas fa-user-plus"></i>
                        {{ trans('visiosoft.theme.base::button.register') }}
                    </button>

                </div>
                <div class="col-6 pr-0 pl-1">
                    <a href="{{ url('login') }}" class="btn btn-sm btn-primary  w-100 py-2">
                        <i class="fas fa-key"></i>
                        {{ trans('visiosoft.theme.base::button.login') }}
                    </a>
                </div>
            </div>
            <div class="social-login py-2 row col-12 m-0">
                {{ addBlock('login/oauth')|raw }}
            </div>
        </div>
    </div>

    {{ asset_add("scripts.js", "visiosoft.theme.base::js/intlTelInput.min.js") }}
    {{ asset_add("scripts.js", "visiosoft.theme.base::js/utils.js") }}
    {{ asset_add("scripts.js", "visiosoft.theme.base::js/phonefield.js") }}
    {{ asset_add("styles.css", "visiosoft.theme.base::css/intlTelInput.css") }}

{% endblock %}

